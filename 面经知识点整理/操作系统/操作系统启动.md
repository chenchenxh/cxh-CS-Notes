http://www.ruanyifeng.com/blog/2013/02/booting.html



## 第一阶段：BIOS

从ROM中读取固定的程序--”基本输入输出系统“（Basic Input/Ouput System），简称BIOS

1. 硬件自检（检查CPU、内存、硬盘等信息）
2. 启动程序（BIOS的操作界面，就有一项是“设定启动顺序”，决定下一步转交给那个设备）



## 第二阶段：主引导记录

按照启动顺序转交控制权

1. 读取设备的第一个扇区（512字节）
2. 判断最后两个字节是否是ox55和oxAA
3. 如果是则更具前面两部分操作，否则继续下一个顺序的设备



### 主引导记录的结构

"主引导记录"只有512个字节，放不了太多东西。它的主要作用是，告诉计算机到硬盘的哪一个位置去找操作系统。

主引导记录由三个部分组成：

（1） 第1-446字节：调用操作系统的机器码。

（2） 第447-510字节：分区表（Partition table）。

（3） 第511-512字节：主引导记录签名（0x55和0xAA）。

**因为计算机中是可以包含多个操作系统的，所以不同的主引导记录就引导到不同的操作系统**

一个硬盘最多只能分为四个一级分区，叫做“主分区”。四个主分区中，只有一个是激活的



## 第三阶段：硬盘启动

当决定了计算机的控制权交给某个分区之后，就分为三个情况：

1. 卷引导记录。

   四个主分区只有一个是激活的，计算机会读取激活分区的第一个扇区，叫做“卷引导记录“（VBR）。作用：将操作系统的位置告知计算机

2. 拓展分区和逻辑分区。

   硬盘越来越大，四个主分区不够。将其中一个主分区定义为“拓展分区”。这个区里面的分区就叫做逻辑分区。

3. 启动管理器

   计算机在读取主引导记录之后，不在把控制权交给某个分区，而是运行事先的“启动管理器”，由用户选择启动某个操作系统



## 第四阶段：操作系统

在控制权转交给操作系统之后，操作系统的内核会被载入内存。

内核加载成功后，会运行第一个程序（Linux是/sbin/init的配置产生init进程），之后的所有进程都是这个进程的后代。

这个进程就会加载操作系统的各个模块，包括窗口和网络，并最终加载登录界面，用户登录。过程结束。



