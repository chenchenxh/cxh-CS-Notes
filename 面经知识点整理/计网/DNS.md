## 基于什么协议？为什么？

UDP

[DNS使用的是TCP协议还是UDP协议](https://blog.csdn.net/qq100440110/article/details/50908992)

DNS同时使用TCP和UDP的53端口。

DNS解析分为两种：

- 一种是辅服务器向主服务器的DNS请求（可能大于UDP最大限制的512字节，而且为了稳定性使用TCP）
- 一种是客户端向DNS服务器请求DNS解析的报文：
  - 小于512字节，可以使用UDP
  - 为了服务器的负载降低
  - 可能设计到多次访问，使用UDP可以很有效降低响应时间

## 访问过程

[DNS解析的过程是什么，求详细的？](https://www.zhihu.com/question/23042131)

**迭代查询**

DNS服务架构：

![img](https://pic2.zhimg.com/80/607e9d15fd6d5f9d02f6f4b0adb261b9_720w.jpg)

浏览器DNS缓存 -- 操作系统（OS）DNS缓存 -- TCP/IP参数中制定的DNS服务器（本地DNS服务器）

 -- 迭代DNS服务器（如果设置本地DNS服务器设置转发模式，那么则转发，否则发给13组根服务器）





![img](https://pic4.zhimg.com/80/7fcd81756bdc8b52ade0531402c43e43_720w.jpg)

## 递归查询和迭代查询

DNS解析流程分为**递归查询**和**迭代查询**，递归查询是以本地名称服务器为中心查询， 递归查询是默认方式，迭代查询是以DNS客户端，也就是客户机器为中心查询。**其实DNS客户端和本地名称服务器是递归，而本地名称服务器和其他名称服务器之间是迭代。**

